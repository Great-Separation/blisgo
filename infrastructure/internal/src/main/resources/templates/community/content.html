<!DOCTYPE html>
<html data-bs-theme="auto" lang="ko" layout:decorate="~{/base/layout}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, shrink-to-fit=0, user-scalable=0, initial-scale=1">
    <title>게시글 - 분리ㅅㄱ</title>
    <meta name="theme-color" content="#ffffff">
    <link rel="canonical" href="https://blisgo.up.railway.app/templates/community/content.html">
    <meta property="og:url" content="https://blisgo.up.railway.app/templates/community/content.html">
    <meta name="twitter:description" content="분리배출 도우미 사전">
    <meta name="twitter:image" content="https://blisgo.up.railway.app/assets/img/favicon/512x512.png">
    <meta name="twitter:title" content="분리ㅅㄱ">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="og:type" content="website">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta property="og:image" content="https://blisgo.up.railway.app/assets/img/favicon/512x512.png">
    <meta name="description" content="분리배출 도우미">
    <script>
        (function() {

            // JavaScript snippet handling Dark/Light mode switching

            const getStoredTheme = () => localStorage.getItem('theme');
            const setStoredTheme = theme => localStorage.setItem('theme', theme);
            const forcedTheme = document.documentElement.getAttribute('data-bss-forced-theme');

            const getPreferredTheme = () => {

                if (forcedTheme) return forcedTheme;

                const storedTheme = getStoredTheme();
                if (storedTheme) {
                    return storedTheme;
                }

                const pageTheme = document.documentElement.getAttribute('data-bs-theme');

                if (pageTheme) {
                    return pageTheme;
                }

                return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            }

            const setTheme = theme => {
                if (theme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.setAttribute('data-bs-theme', 'dark');
                } else {
                    document.documentElement.setAttribute('data-bs-theme', theme);
                }
            }

            setTheme(getPreferredTheme());

            const showActiveTheme = (theme, focus = false) => {
                const themeSwitchers = [].slice.call(document.querySelectorAll('.theme-switcher'));

                if (!themeSwitchers.length) return;

                document.querySelectorAll('[data-bs-theme-value]').forEach(element => {
                    element.classList.remove('active');
                    element.setAttribute('aria-pressed', 'false');
                });

                for (const themeSwitcher of themeSwitchers) {

                    const btnToActivate = themeSwitcher.querySelector('[data-bs-theme-value="' + theme + '"]');

                    if (btnToActivate) {
                        btnToActivate.classList.add('active');
                        btnToActivate.setAttribute('aria-pressed', 'true');
                    }
                }
            }

            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
                const storedTheme = getStoredTheme();
                if (storedTheme !== 'light' && storedTheme !== 'dark') {
                    setTheme(getPreferredTheme());
                }
            });

            window.addEventListener('DOMContentLoaded', () => {
                showActiveTheme(getPreferredTheme());

                document.querySelectorAll('[data-bs-theme-value]')
                    .forEach(toggle => {
                        toggle.addEventListener('click', (e) => {
                            e.preventDefault();
                            const theme = toggle.getAttribute('data-bs-theme-value');
                            setStoredTheme(theme);
                            setTheme(theme);
                            showActiveTheme(theme);
                        })
                    })
            });
        })();
    </script>
    <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/img/favicon/180x180.png?h=d280b01977b791714694a40e9963be0a">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/16x16.png?h=d874033a3f038e5f02e1958d00a60eff">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/32x32.png?h=7dcd0a3651302a768c6a9f0105ac2408">
    <link rel="icon" type="image/png" sizes="180x180" href="/assets/img/favicon/180x180.png?h=d280b01977b791714694a40e9963be0a">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicon/192x192.png?h=6c592fa58710f02e35cca41f7e883cff">
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/img/favicon/512x512.png?h=3ab5991783761ea87ccc35c8e55a58ba">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/cmmn/editor-js.css?h=faa9ece3900b2392c92a1c9f2be7efe0">
    <link rel="stylesheet" href="/assets/css/cmmn/style.css?h=a64769832829539ed2c6fd0f96af741e">
<link rel="manifest" href="/manifest.json" crossorigin="use-credentials">
</head>

<body>
    <main class="container" layout:fragment="main">
        <section id="post" th:fragment="post">
            <form id="form" th:method="post" th:action="@{~/posts}">
                <div class="card shadow-sm border-0 mx-1 .post" style="background: #ffeb7d;">
                    <div class="card-header border-0"><input class="bg-transparent border-0 shadow-none form-control form-control-lg px-0 fw-bold fs-3" type="text" placeholder="제목" name="title" autocomplete="off" required="" th:value="${post?.title}" data-bs-theme="light" readonly="">
                        <div class="hstack gap-2"><span class="badge bg-dark bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" viewBox="-32 0 512 512" width="1em" height="1em" fill="currentColor">
                                    <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. -->
                                    <path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"></path>
                                </svg><small class="fw-normal ps-1" th:text="${post?.author?.name}">닉네임</small></span><span class="badge bg-dark"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em" height="1em" fill="currentColor">
                                    <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. -->
                                    <path d="M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"></path>
                                </svg><small class="fw-normal ps-1" th:text="${#temporals.format(post?.modifiedDate, 'yyyy-MM-dd')}">작성일</small></span><span class="badge bg-dark"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -32 576 576" width="1em" height="1em" fill="currentColor"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg><small class="fw-normal ps-1" th:text="${post?.views}">조회수</small></span><span class="badge bg-dark"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em" height="1em" fill="currentColor"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2H464c26.5 0 48 21.5 48 48c0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1c4.4 7.3 6.9 15.8 6.9 24.9c0 21.3-13.9 39.4-33.1 45.6c.7 3.3 1.1 6.8 1.1 10.4c0 26.5-21.5 48-48 48H294.5c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3V320 272 247.1c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192H96c17.7 0 32 14.3 32 32V448c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V224c0-17.7 14.3-32 32-32z"></path></svg><small class="fw-normal ps-1" th:text="${post?.likes}">좋아요</small></span></div></div><div class="card-body fs-5 text-black bg-light bg-opacity-25 border rounded border-0 p-1"><div id="editorjs"></div><input class="form-control" type="hidden" id="editorjs-content" name="content"></div></div></form><div class="dropstart position-fixed" id="content-options" sec:authorize="isAuthenticated()"><button class="btn btn-secondary border rounded-circle d-flex justify-content-center align-items-center position-fixed bottom-0 end-0 translate-middle p-3 m-2 border-0" aria-expanded="false" data-bs-toggle="dropdown" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-three-dots fs-3" id="float-btn-icon" for="modal-reply">
  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"></path>
</svg></button><div class="dropdown-menu border-0 m-1 bg-transparent" id="board-fixed-menu"><div class="hstack gap-2 d-flex justify-content-end"><a data-bs-toggle="modal" data-bss-tooltip="" class="position-relative text-decoration-none" href="#" data-bs-target="#replies-modal" title="댓글"><button class="btn btn-secondary border rounded border-0 d-flex float-end justify-content-center align-items-center justify-content-xxl-center align-items-xxl-center p-2 position-relative" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-chat-right-text fs-4">
  <path d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z"></path>
  <path d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6m0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"></path>
</svg></button><span class="badge bg-primary position-absolute bottom-0 end-0 p-1" th:text="${post?.replies}" th:if="${post?.replies gt 0}">42</span></a><button class="btn btn-secondary border rounded border-0 d-flex float-end justify-content-center align-items-center justify-content-xxl-center align-items-xxl-center p-2 position-relative" type="button" title="좋아요" th:if="${#authentication.principal.userInfo.email!=post?.author?.email}" th:attr="hx-post = '/posts/' + ${post?.postId} + '/like'" hx-trigger="click"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-suit-heart-fill fs-4">
  <path d="M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1"></path>
</svg></button><a class="btn btn-secondary border rounded border-0 d-flex justify-content-center align-items-center p-2" role="button" data-bs-toggle="tooltip" data-bss-tooltip="" th:href="@{~/community/write(postId=${post?.postId})}" title="편집" th:if="${#authentication.principal.userInfo.email==post?.author?.email}"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-pencil-square fs-4">
  <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"></path>
  <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"></path>
</svg></a><form th:action="@{~/posts/{postId}(postId=${post?.postId})}" th:method="delete" th:if="${#authentication.principal.userInfo.email==post?.author?.email}"><button class="btn btn-secondary border rounded border-0 d-flex float-end justify-content-center align-items-center justify-content-xxl-center align-items-xxl-center p-2" data-bs-toggle="tooltip" data-bss-tooltip="" type="submit" title="삭제"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-trash fs-4">
  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"></path>
  <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"></path>
</svg></button></form></div></div></div><!-- Start: editorjs data load --><script th:inline="javascript">
    /*<![CDATA[*/
    var content = [[${post?.content?.text}]];
    if(content==null){
        content="";
    }
    
    var readOnly = true;
    /*]]>*/
</script>
<script th:src="@{~/assets/js/cmmn/editor.js}"></script><!-- End: editorjs data load --></section><!-- Start: hx-get --><div th:attr="hx-get=${postId != null} ? ('/posts/'+${postId}) : '/posts'" hx-trigger="load" hx-swap="outerHTML" hx-target="#post" hx-include="[name='postId']"><input type="hidden" id="postId" name="postId" th:value="${post!=null ? post.postId : postId}"></div><!-- End: hx-get --><div class="modal" role="dialog" tabindex="-1" id="replies-modal"><div class="modal-dialog modal-xl modal-dialog-centered modal-fullscreen-lg-down" role="document"><div class="modal-content"><div class="modal-header"><div class="hstack gap-2"><strong>댓글</strong><small class="text-muted" th:text="${post?.replies}">42</small></div><button class="btn-close" type="button" aria-label="Close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form class="flex-fill" hx-post="/replies" hx-trigger="submit" hx-swap="innerHTML" hx-target="#replies-stack"><input class="form-control" type="hidden" name="postId" th:value="${postId}"><div class="input-group" sec:authorize="isAnonymous()" th:href="@{~/login}"><input class="form-control" type="text" placeholder="로그인 후 이용할 수 있습니다" readonly="" name="content"><button class="btn btn-success disabled float-end btn-success" type="submit" disabled=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em" height="1em" fill="currentColor"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"></path></svg></button></div><div class="input-group" sec:authorize="isAuthenticated()"><textarea class="form-control" placeholder="주의! 댓글은 줄바꿈을 지원하지 않습니다" name="content" autocomplete="off" spellcheck="true" wrap="soft" rows="2" required="" cols="20"></textarea><button class="btn btn-success float-end btn-success" type="submit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em" height="1em" fill="currentColor"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"></path></svg></button></div></form><div class="vstack" id="replies-stack"><div class="list-group border-0 list-group-flush" id="replies" th:fragment="replies"><a class="list-group-item list-group-item-action border-0 px-0" id="reply" th:each="reply: ${replies?.getContent()}" aria-current="true" th:id="'reply-'+${reply.replyId}"><form th:attr="hx-delete = '/replies/' + ${reply.replyId}, hx-target = '#reply-'+${reply.replyId}" hx-trigger="submit" hx-swap="delete"><div class="row p-0 m-0"><div class="col-auto align-self-start p-0"><img class="rounded img-fluid" id="reply-account-img" width="50px" height="50px" alt="profile" th:src="${reply?.author?.picture?.url}" src="https://i.pravatar.cc/200"></div><div class="col"><small class="fw-bold text-secondary" th:text="${reply?.author?.name}">닉네임</small><small class="text-secondary ms-2" th:text="${reply?.timeDiff}">20분 전</small><span sec:authorize="isAuthenticated()"><label class="form-label p-0 m-0 ms-4" for="reply-delete" type="submit" th:if="${#authentication.principal.userInfo.email eq reply?.author?.email}" th:for="'reply-delete-'+${reply.replyId}"><button class="btn btn-sm d-none align-items-xxl-start" id="reply-delete" th:id="'reply-delete-'+${reply.replyId}"></button><svg xmlns="http://www.w3.org/2000/svg" viewBox="-64 0 512 512" width="1em" height="1em" fill="currentColor" class="text-danger"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"></path></svg></label></span><p class="m-0" th:text="${reply?.content}"><span style="color: rgb(51, 51, 51);">댓글 내용</span></p></div></div></form></a><a class="list-group-item list-group-item-action border-0 p-0" th:attr="hx-get = '/replies' + '?postId=' + ${postId} + '&amp;lastReplyId=' + ${replies?.getNumberOfElements() > 0 ? replies.getContent().get(replies.getNumberOfElements()-1).replyId() : '' }" hx-trigger="intersect once" hx-swap="beforeend" th:if="${replies==null || replies?.hasNext()}" hx-target="#replies-stack"></a></div></div></div></div></div></div></main><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script><script src="/assets/js/bs-init.js?h=81d18e10772fe19d112aee494afb554c"></script></body></html>